class i{constructor(){if(i.instance)return i.instance;this.audioContext=null,this.microphoneStream=null,this.sourceNode=null,this.analyserNode=null,this.isInitialized=!1,i.instance=this}async initialize(){if(!this.isInitialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.microphoneStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1,latency:0}}),this.sourceNode=this.audioContext.createMediaStreamSource(this.microphoneStream),this.analyserNode=this.audioContext.createAnalyser(),this.analyserNode.fftSize=2048,this.sourceNode.connect(this.analyserNode),this.isInitialized=!0,console.log("AudioEngine initialized successfully.")}catch(e){throw console.error("Error initializing AudioEngine:",e),e}}getAudioContext(){if(!this.isInitialized)throw new Error("AudioEngine not initialized. Call initialize() first.");return this.audioContext}getSourceNode(){if(!this.isInitialized)throw new Error("AudioEngine not initialized. Call initialize() first.");return this.sourceNode}getAnalyserNode(){if(!this.isInitialized)throw new Error("AudioEngine not initialized. Call initialize() first.");return this.analyserNode}resume(){this.audioContext&&this.audioContext.state==="suspended"&&this.audioContext.resume()}}const t=new i;export{t as a};
